# Supabase
SUPABASE_URL=
SUPABASE_PUBLISHABLE_KEY=
SUPABASE_SECRET_KEY=
# Backward-compatible aliases (optional)
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=
# Backward-compatible alias (optional)
NEXT_PUBLIC_SUPABASE_ANON_KEY=

# TradingView webhook
# Supports either HMAC header `x-tv-signature` OR body field `secret`.
TRADINGVIEW_WEBHOOK_SECRET=
WEBHOOK_MAX_SKEW_SECONDS=600
WEBHOOK_REPLAY_TTL_MINUTES=120
WEBHOOK_RATE_LIMIT_PER_MINUTE=180
WEBHOOK_MAX_BODY_BYTES=16384
# Production recommendation:
# WEBHOOK_REQUIRE_SIGNATURE=true
# WEBHOOK_ALLOW_BODY_SECRET_FALLBACK=false
WEBHOOK_REQUIRE_SIGNATURE=false
WEBHOOK_ALLOW_BODY_SECRET_FALLBACK=true
RUN_NOW_COOLDOWN_SECONDS=20
CME_LINK_UPDATE_COOLDOWN_SECONDS=20
AUTH_SESSION_RATE_LIMIT_PER_MINUTE=30
AUTH_LOGIN_RATE_LIMIT_PER_MINUTE=15
ADMIN_API_RATE_LIMIT_PER_MINUTE=60
AUTH_LOGIN_MAX_FAILED_ATTEMPTS=5
AUTH_LOGIN_LOCK_MINUTES=15
SYSTEM_ALERT_WEBHOOK_4XX_RATE_PCT=20
SYSTEM_ALERT_WEBHOOK_MIN_SAMPLES=20
SYSTEM_ALERT_WEBHOOK_5XX_COUNT=1

# Worker
WORKER_CRON_RELATION=*/30 * * * *
WORKER_CRON_CME=*/30 * * * *
WORKER_RETENTION_CRON=15 6 * * *
WORKER_CONTROL_PORT=4100
WORKER_CONTROL_SECRET=

# Web -> Worker control
WORKER_CONTROL_URL=http://127.0.0.1:4100

# CME
CME_TIMEOUT_MS=45000
CME_HEADLESS=true
CME_REQUIRE_POSITIVE_DTE=true
CME_EXTRACT_MAX_ATTEMPTS=3
CME_EXTRACT_RETRY_DELAY_MS=1200
RELATION_STALE_MINUTES=35
CME_STALE_MINUTES=35
# Per-symbol market session mode:
# auto | always_open | always_closed | fx_24_5 | ifc_metal
# auto behavior:
# - XAUUSD -> ifc_metal (IFC metals schedule in CET/CEST)
# - THBUSD -> fx_24_5
# - BTCUSD -> always_open
SYMBOL_SESSION_MODE_XAUUSD=auto
SYMBOL_SESSION_MODE_THBUSD=auto
SYMBOL_SESSION_MODE_BTCUSD=auto
CME_SESSION_TIMEZONE=America/Chicago
CME_HOLIDAY_CLOSURES=
CME_SESSION_FORCE_OPEN=false
WEBHOOK_LOG_RETENTION_DAYS=7
JOB_RUNS_RETENTION_DAYS=30
AUTH_LOCKOUTS_RETENTION_DAYS=30
CME_SERIES_LINKS_RETENTION_DAYS=90

# App URLs
NEXT_PUBLIC_APP_NAME=OIDashboard

# Frontend polling performance/cost tuning
NEXT_PUBLIC_DASHBOARD_POLL_MS=15000
NEXT_PUBLIC_DASHBOARD_POLL_HIDDEN_MS=60000
NEXT_PUBLIC_DASHBOARD_POLL_MAX_BACKOFF_MS=120000
